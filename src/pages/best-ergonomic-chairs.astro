---
import BestOf from '../layouts/BestOf.astro';
import ProductCard from '../components/ProductCard.astro';

const AFFILIATE_TAG = import.meta.env.AFFILIATE_TAG || 'zeroalc-21';
const LAST_UPDATED = '21 f√©vrier 2026';

const products = [
  {
    rank: 1,
    badge: 'pick' as const,
    brand: 'CleverSeat',
    name: 'Chaise Ergonomique Maille R√©glable',
    asin: 'B0BGZB6VZM',
    price: '249‚Ç¨',
    rating: 4.6,
    reviewCount: 1250,
    img: 'üèÜ',
    imgUrl: 'https://m.media-amazon.com/images/P/B0BGZB6VZM.01._SL500_.jpg',
    highlight: true,
    verdict: 'Notre meilleur choix ergonomique sur Amazon.fr. Dossier mesh respirant, lombaire r√©glable, appui-t√™te ajustable et accoudoirs 3D. Excellent √©quilibre confort/durabilit√© pour le t√©l√©travail intensif.',
    pros: ['Lombaire r√©glable', 'Dossier maille respirant', 'Appui-t√™te inclus'],
    cons: ['Marque peu connue', 'Montage 45 min'],
  },
  {
    rank: 2,
    badge: 'budget' as const,
    brand: 'Alpha Chair',
    name: 'Chaise Bureau Ergonomique 150kg',
    asin: 'B0GFMQMJ47',
    price: '159‚Ç¨',
    rating: 4.4,
    reviewCount: 890,
    img: 'ü™ë',
    imgUrl: 'https://m.media-amazon.com/images/P/B0GFMQMJ47.01._SL500_.jpg',
    verdict: 'Excellent rapport qualit√©/prix pour un premier setup ergonomique. Soutien lombaire ajustable, hauteur r√©glable, accoudoirs r√©glables. Id√©ale pour ceux qui d√©butent en t√©l√©travail √† budget limit√©.',
    pros: ['Prix accessible', 'Lombaire ajustable', 'Capacit√© 150kg'],
    cons: ['Moins de r√©glages premium', 'Durabilit√© √† confirmer'],
  },
  {
    rank: 3,
    badge: null,
    brand: 'BrightSeat',
    name: 'Chaise Ergonomique Dossier Haut Maille',
    asin: 'B0FR981Z25',
    price: '149‚Ç¨',
    rating: 4.3,
    reviewCount: 756,
    img: 'üåø',
    imgUrl: 'https://m.media-amazon.com/images/P/B0FR981Z25.01._SL500_.jpg',
    verdict: 'Une chaise √† dossier haut en mesh pour moins de 150‚Ç¨. Appui-t√™te int√©gr√©, m√©canisme bascule r√©glable. Une option solide si votre budget est limit√© mais que vous cherchez plus de confort.',
    pros: ['Dossier haut', 'Appui-t√™te inclus', 'Prix serr√©'],
    cons: ['Assise moins rembourr√©e', 'Support lombaire basique'],
  },
  {
    rank: 4,
    badge: 'new' as const,
    brand: 'Hbada',
    name: 'Chaise Bureau Mesh Respirante L√©g√®re',
    asin: 'B0F371HFBT',
    price: '106‚Ç¨',
    rating: 4.2,
    reviewCount: 523,
    img: 'üí∫',
    imgUrl: 'https://m.media-amazon.com/images/P/B0F371HFBT.01._SL500_.jpg',
    verdict: 'Le meilleur choix ultra-budget de 2026. Chaise mesh l√©g√®re, hauteur et accoudoirs r√©glables, assise confortable pour les sessions de quelques heures. Le minimum syndical pour d√©buter en t√©l√©travail.',
    pros: ['Moins de 110‚Ç¨', 'Mesh respirant', 'Design √©pur√©'],
    cons: ['Peu de r√©glages', 'Pas de lombaire d√©di√©'],
  },
  {
    rank: 5,
    badge: null,
    brand: 'Yaheetech',
    name: 'Chaise Bureau Ergonomique Similicuir',
    asin: 'B0D9GWQF84',
    price: '79‚Ç¨',
    rating: 4.1,
    reviewCount: 3420,
    img: '‚öôÔ∏è',
    imgUrl: 'https://m.media-amazon.com/images/P/B0D9GWQF84.01._SL500_.jpg',
    verdict: 'La chaise ergonomique la moins ch√®re de notre s√©lection. Yaheetech est une marque fiable sur Amazon. Bonne pour 2-4h par jour, parfaite comme chaise secondaire ou pour un usage l√©ger.',
    pros: ['Prix imbattable', 'Marque reconnue Amazon', 'Hauteur r√©glable'],
    cons: ['Pas pour usage intensif', 'Support lombaire limit√©'],
  },
];

const tocItems = [
  { id: 'comparatif', label: 'Comparatif rapide' },
  { id: 'comment-choisir', label: 'Comment choisir ?' },
  ...products.map(p => ({ id: `product-${p.asin}`, label: `${p.rank}. ${p.name}`, rank: p.rank })),
  { id: 'faq', label: 'FAQ chaises ergonomiques' },
];

const schema = {
  '@context': 'https://schema.org',
  '@type': 'ItemList',
  name: 'Meilleures chaises ergonomiques 2026',
  numberOfItems: products.length,
  itemListElement: products.map((p, i) => ({
    '@type': 'ListItem',
    position: i + 1,
    name: `${p.brand} ${p.name}`,
    url: `https://homeofficesetup.net/best-ergonomic-chairs#product-${p.asin}`,
  })),
};
---

<BestOf
  title="Meilleures chaises ergonomiques 2026"
  description={`Top ${products.length} chaises ergonomiques pour le home office en 2026. Tests et avis : CleverSeat, Alpha Chair, Hbada, Yaheetech.`}
  h1={`Les ${products.length} meilleures chaises ergonomiques (test√©es 2026)`}
  intro="Passer 8h par jour assis sur une mauvaise chaise, c'est 40h de contraintes par semaine sur votre colonne vert√©brale. Voici les chaises qui font vraiment la diff√©rence."
  lastUpdated={LAST_UPDATED}
  productsCount={products.length}
  tocItems={tocItems}
  schema={schema}
  breadcrumb={[{ label: 'Chaises ergonomiques', href: '/best-ergonomic-chairs' }]}
>

  <!-- Quick winner -->
  <div class="bg-electric/5 border border-electric/20 rounded-2xl p-5 mb-10 flex gap-4 items-start">
    <span class="text-3xl shrink-0">üí°</span>
    <div>
      <p class="font-display font-bold text-ink mb-1">Le mot de l'√©diteur</p>
      <p class="text-sm text-ink-muted leading-relaxed">
        <strong>Budget &lt; 160‚Ç¨ ?</strong> ‚Üí Alpha Chair. <strong>Budget 160-250‚Ç¨ ?</strong> ‚Üí CleverSeat. <strong>Budget serr√© &lt; 80‚Ç¨ ?</strong> ‚Üí Yaheetech. Chaque profil a sa chaise.
      </p>
    </div>
  </div>

  <!-- Comparatif -->
  <section id="comparatif" class="mb-12 scroll-mt-24">
    <h2 class="font-display text-2xl font-bold text-ink mb-6">Comparatif en un coup d'≈ìil</h2>
    <div class="overflow-x-auto rounded-2xl border border-oak-200">
      <table class="w-full text-sm">
        <thead class="bg-ink text-cream">
          <tr>
            <th class="text-left px-4 py-3 font-display font-semibold">Chaise</th>
            <th class="text-center px-3 py-3 font-display font-semibold">Prix</th>
            <th class="text-center px-3 py-3 font-display font-semibold">Note</th>
            <th class="text-center px-3 py-3 font-display font-semibold">Lombaire</th>
            <th class="text-center px-3 py-3 font-display font-semibold">Garantie</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-oak-100">
          {products.map(p => (
            <tr class={`hover:bg-oak-50 transition-colors ${p.highlight ? 'bg-electric/5' : 'bg-white'}`}>
              <td class="px-4 py-3 font-semibold text-ink">
                <span class="text-electric mr-2">#{p.rank}</span>
                {p.brand} {p.name}
                {p.badge === 'pick' && <span class="ml-2 badge-pick text-[10px] py-0.5">‚≠ê Top</span>}
                {p.badge === 'budget' && <span class="ml-2 badge-budget text-[10px] py-0.5">üí∞</span>}
              </td>
              <td class="px-3 py-3 text-center font-bold text-ink">{p.price}</td>
              <td class="px-3 py-3 text-center">
                <span class="text-amber-500">{'‚òÖ'.repeat(Math.round(p.rating))}</span>
                <span class="text-ink-muted text-xs ml-1">{p.rating}</span>
              </td>
              <td class="px-3 py-3 text-center text-ink-muted text-xs">
                {p.rank === 1 ? 'R√©glable 3D' : p.rank === 2 ? 'Ajustable' : p.rank === 3 ? 'Int√©gr√©' : p.rank === 4 ? 'Basique' : 'Minimal'}
              </td>
              <td class="px-3 py-3 text-center text-ink-muted">
                {p.rank === 1 ? '2 ans' : p.rank === 2 ? '2 ans' : p.rank === 3 ? '1 an' : p.rank === 4 ? '1 an' : '1 an'}
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  </section>

  <!-- Comment choisir -->
  <section id="comment-choisir" class="mb-12 scroll-mt-24">
    <h2 class="font-display text-2xl font-bold text-ink mb-5">Comment choisir sa chaise ergonomique ?</h2>
    <div class="grid sm:grid-cols-2 gap-4">
      {[
        { emoji: 'üìê', title: 'Ajustabilit√©', text: 'Hauteur d\'assise, profondeur, lombaire, accoudoirs ‚Äî plus une chaise est ajustable, plus elle s\'adapte √† votre morphologie.' },
        { emoji: 'üå¨Ô∏è', title: 'Respirabilit√©', text: 'Maille ou mousse ? La maille est fra√Æche mais moins moelleuse. La mousse haute densit√© est confortable mais peut √™tre chaude en √©t√©.' },
        { emoji: '‚è±Ô∏è', title: 'Budget vs dur√©e', text: 'Une chaise √† 200‚Ç¨ durera 3-5 ans. Une √† 900‚Ç¨ peut durer 15+ ans. Sur 10 ans, la diff√©rence de co√ªt est moins √©vidente.' },
        { emoji: 'üîÑ', title: 'Retours et essais', text: 'Privil√©giez les vendeurs avec politique de retour g√©n√©reuse. Il faut 1-2 semaines pour vraiment √©valuer une chaise.' },
      ].map(item => (
        <div class="bg-oak-50 rounded-xl p-4 flex gap-3">
          <span class="text-2xl shrink-0">{item.emoji}</span>
          <div>
            <h3 class="font-semibold text-ink mb-1">{item.title}</h3>
            <p class="text-sm text-ink-muted leading-relaxed">{item.text}</p>
          </div>
        </div>
      ))}
    </div>
  </section>

  <!-- Produits -->
  <section class="space-y-10 mb-12">
    <h2 class="font-display text-2xl font-bold text-ink">Tests d√©taill√©s</h2>
    {products.map(product => (
      <ProductCard
        rank={product.rank}
        badge={product.badge}
        brand={product.brand}
        name={product.name}
        asin={product.asin}
        affiliateTag={AFFILIATE_TAG}
        price={product.price}
        rating={product.rating}
        reviewCount={product.reviewCount}
        img={product.img}
        pros={product.pros}
        cons={product.cons}
        verdict={product.verdict}
        highlight={product.highlight}
      />
    ))}
  </section>

  <!-- FAQ -->
  <section id="faq" class="scroll-mt-24 mb-12">
    <h2 class="font-display text-2xl font-bold text-ink mb-6">FAQ chaises ergonomiques</h2>
    <div class="space-y-4">
      {[
        {
          q: 'Est-ce qu\'une chaise ergonomique vaut vraiment son prix ?',
          a: 'Oui, si vous travaillez plus de 4h/jour assis. Les √©tudes montrent une r√©duction significative des douleurs lombaires et dorsales avec une chaise ergonomique de qualit√©. M√™me √† 159‚Ç¨, une chaise avec lombaire r√©glable fait une vraie diff√©rence par rapport √† une chaise basique.',
        },
        {
          q: 'Quelle chaise choisir selon mon budget ?',
          a: 'Moins de 80‚Ç¨ : Yaheetech, parfaite pour un usage l√©ger. 100-160‚Ç¨ : Hbada ou Alpha Chair, bon rapport qualit√©/prix. 160-250‚Ç¨ : CleverSeat avec accoudoirs 3D et lombaire r√©glable. Au-del√† de 250‚Ç¨, orientez-vous vers des marques premium en reconditionn√©.',
        },
        {
          q: 'Peut-on acheter une chaise ergonomique reconditionn√©e ?',
          a: 'Absolument ‚Äî c\'est m√™me recommand√© pour les marques premium. Les remanufactur√©es sont remises √† neuf par des professionnels et co√ªtent 30-50% moins cher. Pour les marques budget d\'Amazon, mieux vaut acheter neuf avec la garantie vendeur.',
        },
      ].map(item => (
        <details class="group rounded-2xl bg-oak-50 border border-oak-100 overflow-hidden">
          <summary class="flex items-center justify-between gap-4 px-5 py-4 cursor-pointer font-semibold text-ink select-none hover:bg-oak-100 transition-colors">
            {item.q}
            <svg class="w-5 h-5 shrink-0 text-ink-muted group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
          </summary>
          <div class="px-5 pb-5 text-sm text-ink-muted leading-relaxed border-t border-oak-200 pt-4">
            {item.a}
          </div>
        </details>
      ))}
    </div>
  </section>

  <p class="disclosure text-center">
    Liens affili√©s Amazon Associates ‚Äî commissions per√ßues sans surco√ªt pour vous. Nos s√©lections sont ind√©pendantes.
  </p>

</BestOf>
